/* ===== Theme ===== */
:root{
  --wm-green:#115740;   /* page background */
  --text:#ffffff;       /* default text */
  --muted:#cfe2d4;      /* secondary text on green */
  --link:#c6ffe0;       /* links on green */
  --panel:rgba(255,255,255,0.06);   /* translucent panels */
  --border:rgba(255,255,255,0.14);
  --focus:#9fffcf;
  --code-bg:rgba(0,0,0,0.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--wm-green);
  color:var(--text);
}

/* Visually hidden but focusable (for skip link etc.) */
.visually-hidden-focusable{
  position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.visually-hidden-focusable:focus{
  position:static; width:auto; height:auto; padding:6px 10px; border-radius:8px;
  background:#fff; color:#000;
}

/* ===== Top header (logo on right) ===== */
header.site{
  position:sticky; top:0; z-index:20;
  background:rgba(0,0,0,0.18);
  backdrop-filter:saturate(140%) blur(6px);
  border-bottom:1px solid var(--border);
  padding:8px 20px;

  /* new layout */
  display:flex;
  justify-content:space-between; /* title/sub left, logo right */
  align-items:center;            /* vertical alignment */
}

/* left stack (title + subtitle) */
.header-left{
  display:flex;
  flex-direction:column;
  justify-content:center;
}
header.site h1,
.header-left h1{ margin:0; font-size:18px; }
header.site .sub,
.header-left .sub{ color:var(--muted); font-size:13px; margin-top:2px; }

/* right logo */
.header-right{ display:flex; align-items:center; }
.header-logo{
  height:42px;         /* visually matches two lines of text */
  width:auto;
  object-fit:contain;
  opacity:.95;
  margin-left:12px;
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.25));
}

/* ===== 3-column shell ===== */
.shell{
  display:grid;
  grid-template-columns: 280px minmax(0,1fr) 280px;
  gap:16px;
  padding:16px;
  max-width:1400px;
  margin:0 auto;
}

/* ===== Sidebars (shared) ===== */
.sidebar{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px;
  overflow:auto;
}

/* Left sidebar (navigation) — always visible, sticky */
.shell > aside.sidebar:nth-of-type(1){
  position:sticky; top:72px;        /* below header */
  height:calc(100vh - 96px);
  min-width:240px;
}

/* Right sidebar (TOC) — sticky as well */
.shell > aside.sidebar:nth-of-type(2){
  position:sticky; top:72px;
  height:calc(100vh - 96px);
}

.sidebar h2{margin:0 0 8px 0; font-size:14px; letter-spacing:.02em; text-transform:uppercase; color:var(--muted)}
.sidebar a{color:var(--link); text-decoration:none}
.sidebar a:hover{text-decoration:underline}

/* ===== Left nav tree ===== */
.nav-list{list-style:none; padding:0; margin:8px 0}
.nav-list li{margin:6px 0}
.nav-list a.current{font-weight:700; color:#fff}

/* Search input (left) */
input.nav-search{
  width:100%; padding:8px 10px; border-radius:10px; border:1px solid var(--border);
  background:rgba(255,255,255,0.08); color:var(--text); margin-bottom:8px;
}
input.nav-search::placeholder{color:#e4f5ea}

/* Generic nested list look */
.nav-list ul{
  list-style:none;
  margin:4px 0 4px 18px;
  padding:0;
  border-left:1px solid var(--border);
}
.nav-list ul li{ margin:4px 0; padding-left:10px; }
.nav-list ul li a{
  font-size:15px; color:var(--muted); transition:color .2s ease;
}
.nav-list ul li a:hover{ color:var(--link); text-decoration:underline; }
.nav-list li a:focus-visible{
  outline:2px solid var(--focus); outline-offset:3px; border-radius:6px;
}

/* Expandable Registration submenu (link + caret) */
.submenu-head{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
}
.submenu-head .parent-link{ font-weight:700; color:#fff; text-decoration:none; }
.submenu-toggle{
  background:none; border:none; padding:2px 6px;
  color:var(--link); font-size:16px; font-weight:700; cursor:pointer;
  line-height:1; border-radius:6px;
}
.submenu-toggle:hover{ text-decoration:underline; }
.submenu-toggle:focus-visible{ outline:2px solid var(--focus); outline-offset:2px; }
.submenu-toggle::before{ content:"➕"; margin-right:6px; font-size:14px; }
.submenu-toggle[aria-expanded="true"]::before{ content:"➖"; }

ul.submenu{
  list-style:none;
  margin:4px 0 0 18px;
  padding:0;
  border-left:1px solid var(--border);
  display:none; /* collapsed by default; JS toggles to block */
}
ul.submenu li{ margin:4px 0; padding-left:10px; }
ul.submenu li a{ font-size:15px; color:var(--muted); }
ul.submenu li a:hover{ color:var(--link); text-decoration:underline; }

/* ===== Content ===== */
main#content{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  padding:24px 22px 40px;
}
.content h1{margin-top:0; font-size:34px; line-height:1.2}
.content h2{margin-top:28px; font-size:24px}
.content h3{margin-top:24px; font-size:18px}
p.small{color:var(--muted); font-size:13px}

.card{
  background:rgba(255,255,255,0.03);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px 16px;
  margin:14px 0;
}

a{color:var(--link)}
a:focus, button:focus, input:focus, select:focus{
  outline:2px solid var(--focus); outline-offset:2px; border-radius:6px;
}

/* Pills / action links */
.badge{
  display:inline-block; text-decoration:none; color:var(--text);
  padding:8px 12px; border-radius:999px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.08);
  font-weight:600;
}
.badge:hover{background:rgba(255,255,255,0.16)}

/* Checklists */
ul.checklist{list-style:none; padding:0; margin:0}
ul.checklist li{padding-left:26px; position:relative; margin:8px 0}
ul.checklist li::before{content:"✓"; position:absolute; left:0; color:#a8ffd2; font-weight:700}

/* Tables — WHITE borders + centered both ways */
.table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;             /* consistent cell sizing */
}
.table th,.table td{
  border:1px solid #ffffff;       /* white outline */
  padding:10px 8px;
  text-align:center;              /* horizontal center */
  vertical-align:middle;          /* vertical center */
  word-break:break-word;
}
.table th{background:rgba(255,255,255,0.08); font-weight:700}

/* Code blocks */
code{background:var(--code-bg); padding:.1em .35em; border-radius:6px}

/* ===== Right TOC ===== */
#toc{font-size:14px}
#toc ul{list-style:none; padding-left:8px}
#toc li{margin:6px 0}
#toc a{color:var(--link); text-decoration:none}
#toc a.active{font-weight:700; text-decoration:underline}

/* ===== VCCS lookup (minor UI polish) ===== */
#equiv-db label span{font-weight:600; color:var(--text)}
#equiv-db input,#equiv-db select{
  padding:6px 8px; border:1px solid var(--border); border-radius:8px; min-width:160px;
  background:rgba(255,255,255,0.08); color:var(--text);
}
#equiv-db details{
  background:rgba(255,255,255,0.04); border:1px solid var(--border);
  padding:8px 10px; border-radius:8px;
}

/* ===== Full-screen Disclaimer ===== */
body.modal-open{ overflow:hidden; }
.disclaimer-overlay{
  position:fixed; inset:0; 
  z-index:9999 !important;   /* force above all */
  background:var(--wm-green);
  display:flex; align-items:center; justify-content:center; padding:24px;
}
.disclaimer-modal{
  width:min(800px, 92vw);
  background:rgba(255,255,255,0.06);
  border:1px solid var(--border);
  border-radius:16px;
  color:#fff;
  padding:22px 20px;
  box-shadow:0 10px 35px rgba(0,0,0,.35);
}
.disclaimer-modal h2{margin:0 0 8px 0; font-size:22px}
.disclaimer-modal p{margin:8px 0}
.disclaimer-modal ul{margin:10px 0 0 18px}
.disclaimer-actions{display:flex; gap:12px; margin-top:16px; flex-wrap:wrap}
.disclaimer-actions .btn{
  cursor:pointer; padding:10px 14px; border-radius:10px; font-weight:700;
  border:1px solid rgba(255,255,255,0.5); background:transparent; color:#fff;
}
.disclaimer-actions .btn.primary{
  background:#fff; color:#115740; border:1px solid #fff;
}
.disclaimer-meta{font-size:13px; color:var(--muted); margin-top:8px}
.disclaimer-dont{
  display:flex; align-items:center; gap:8px; margin-top:12px; color:var(--muted);
}
.disclaimer-dont input[type="checkbox"]{ width:1.05em; height:1.05em; accent-color:var(--focus); }

/* ===== Centered faded background logo ===== */
body::before{
  content:"";
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  width:600px;
  height:600px;
  background:url("wm_cypher_gold.png") no-repeat center center;
  background-size:contain;
  opacity:0.06;
  pointer-events:none;
  z-index:-1;                 /* sit underneath EVERYTHING */
}

/* Ensure regular content sits above the logo */
header.site,
.shell{
  position:relative;
  z-index:1;
}

/* ===== Responsive ===== */
@media (max-width: 1200px){
  .shell{grid-template-columns: 240px 1fr 240px}
}
@media (max-width: 980px){
  .shell{grid-template-columns: 1fr; }
  .shell > aside.sidebar:nth-of-type(1),
  .shell > aside.sidebar:nth-of-type(2){
    position:static; height:auto; min-width:0;
  }
}

/* Header shrinks gracefully on small screens */
@media (max-width:600px){
  header.site{ flex-direction:column; align-items:flex-start; }
  .header-right{ margin-top:6px; }
  .header-logo{ height:32px; }
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  *{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
    scroll-behavior:auto !important;
  }
}
